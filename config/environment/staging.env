# AI Content Factory - Staging Environment Configuration
# This file should be securely stored and never committed to version control

# ========================
# Environment Settings
# ========================
NODE_ENV=staging
APP_ENV=staging
DEBUG=false
VERBOSE_LOGGING=false

# ========================
# Application Settings
# ========================
APP_NAME="AI Content Factory (Staging)"
APP_VERSION=1.0.0
APP_URL=https://staging.aicontentfactory.com
API_BASE_URL=https://api-staging.aicontentfactory.com
WEB_DASHBOARD_URL=https://dashboard-staging.aicontentfactory.com

# Server Configuration
PORT=5000
HOST=0.0.0.0
CORS_ORIGIN=https://staging.aicontentfactory.com,https://dashboard-staging.aicontentfactory.com

# ========================
# Database Configuration
# ========================
# PostgreSQL Database (Cloud hosted)
DATABASE_URL=${STAGING_DATABASE_URL}
DB_HOST=${STAGING_DB_HOST}
DB_PORT=5432
DB_NAME=ai_content_factory_staging
DB_USER=${STAGING_DB_USER}
DB_PASSWORD=${STAGING_DB_PASSWORD}
DB_SSL=true
DB_POOL_MIN=2
DB_POOL_MAX=15
DB_TIMEOUT=30000
DB_CONNECTION_LIMIT=20

# Redis Cache
REDIS_URL=${STAGING_REDIS_URL}
REDIS_HOST=${STAGING_REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${STAGING_REDIS_PASSWORD}
REDIS_DB=0
REDIS_TLS=true

# ========================
# AI Services Configuration
# ========================
# Default Quality Tier
DEFAULT_QUALITY_TIER=balanced

# Text AI Services
GROQ_API_KEY=${STAGING_GROQ_API_KEY}
GROQ_MODEL=llama3-70b-8192
GROQ_MAX_TOKENS=4096
GROQ_RATE_LIMIT=50

OPENAI_API_KEY=${STAGING_OPENAI_API_KEY}
OPENAI_MODEL=gpt-4-turbo
OPENAI_MAX_TOKENS=3000
OPENAI_ORGANIZATION=${STAGING_OPENAI_ORG}

CLAUDE_API_KEY=${STAGING_CLAUDE_API_KEY}
CLAUDE_MODEL=claude-3-sonnet-20240229
CLAUDE_MAX_TOKENS=2048

# Image AI Services
STABILITY_API_KEY=${STAGING_STABILITY_API_KEY}
LEONARDO_API_KEY=${STAGING_LEONARDO_API_KEY}
MIDJOURNEY_API_KEY=${STAGING_MIDJOURNEY_API_KEY}

# Audio/TTS Services
ELEVENLABS_API_KEY=${STAGING_ELEVENLABS_API_KEY}
AZURE_SPEECH_KEY=${STAGING_AZURE_SPEECH_KEY}
AZURE_SPEECH_REGION=eastus

# ========================
# Platform Integration
# ========================
# YouTube API (Test channels)
YOUTUBE_API_KEY=${STAGING_YOUTUBE_API_KEY}
YOUTUBE_CLIENT_ID=${STAGING_YOUTUBE_CLIENT_ID}
YOUTUBE_CLIENT_SECRET=${STAGING_YOUTUBE_CLIENT_SECRET}
YOUTUBE_REDIRECT_URI=https://api-staging.aicontentfactory.com/auth/youtube/callback

# TikTok API (Sandbox)
TIKTOK_CLIENT_KEY=${STAGING_TIKTOK_CLIENT_KEY}
TIKTOK_CLIENT_SECRET=${STAGING_TIKTOK_CLIENT_SECRET}
TIKTOK_REDIRECT_URI=https://api-staging.aicontentfactory.com/auth/tiktok/callback

# Instagram Basic Display API (Test app)
INSTAGRAM_CLIENT_ID=${STAGING_INSTAGRAM_CLIENT_ID}
INSTAGRAM_CLIENT_SECRET=${STAGING_INSTAGRAM_CLIENT_SECRET}
INSTAGRAM_REDIRECT_URI=https://api-staging.aicontentfactory.com/auth/instagram/callback

# Facebook Graph API (Development app)
FACEBOOK_APP_ID=${STAGING_FACEBOOK_APP_ID}
FACEBOOK_APP_SECRET=${STAGING_FACEBOOK_APP_SECRET}
FACEBOOK_REDIRECT_URI=https://api-staging.aicontentfactory.com/auth/facebook/callback

# Twitter API v2 (Development environment)
TWITTER_CLIENT_ID=${STAGING_TWITTER_CLIENT_ID}
TWITTER_CLIENT_SECRET=${STAGING_TWITTER_CLIENT_SECRET}
TWITTER_BEARER_TOKEN=${STAGING_TWITTER_BEARER_TOKEN}

# ========================
# Trend Collection Sources
# ========================
# Google Trends
GOOGLE_TRENDS_API_KEY=${STAGING_GOOGLE_TRENDS_API_KEY}

# Reddit API
REDDIT_CLIENT_ID=${STAGING_REDDIT_CLIENT_ID}
REDDIT_CLIENT_SECRET=${STAGING_REDDIT_CLIENT_SECRET}
REDDIT_USER_AGENT=ai-content-factory-staging:v1.0.0

# ========================
# File Storage
# ========================
# AWS S3 for staging
STORAGE_TYPE=s3
AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_ACCESS_KEY}
AWS_REGION=us-east-1
AWS_S3_BUCKET=ai-content-factory-staging
AWS_CLOUDFRONT_DOMAIN=${STAGING_CLOUDFRONT_DOMAIN}

# Upload limits
MAX_FILE_SIZE=100MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,mp4,mov,mp3,wav

# ========================
# Security Settings
# ========================
# JWT Settings (Strong secrets for staging)
JWT_SECRET=${STAGING_JWT_SECRET}
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=30d
JWT_ALGORITHM=HS256

# Session Settings
SESSION_SECRET=${STAGING_SESSION_SECRET}
SESSION_MAX_AGE=28800000
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# Rate Limiting (Moderate for staging)
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=500
RATE_LIMIT_SKIP_SUCCESSFUL=false

# CORS Settings
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# ========================
# SSL/HTTPS Configuration
# ========================
HTTPS_ENABLED=true
SSL_CERT_PATH=${STAGING_SSL_CERT_PATH}
SSL_KEY_PATH=${STAGING_SSL_KEY_PATH}
FORCE_HTTPS=true

# ========================
# Email Configuration
# ========================
# SMTP Settings (using staging email service)
SMTP_HOST=${STAGING_SMTP_HOST}
SMTP_PORT=587
SMTP_USER=${STAGING_SMTP_USER}
SMTP_PASSWORD=${STAGING_SMTP_PASSWORD}
SMTP_FROM=staging@aicontentfactory.com
SMTP_TLS=true
EMAIL_ENABLED=true

# Email Templates
EMAIL_TEMPLATE_PATH=./templates/email
ADMIN_EMAIL=admin@aicontentfactory.com
SUPPORT_EMAIL=support@aicontentfactory.com

# ========================
# Monitoring & Analytics
# ========================
# Error Tracking (Sentry)
SENTRY_DSN=${STAGING_SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_ENABLED=true
SENTRY_SAMPLE_RATE=1.0
SENTRY_TRACES_SAMPLE_RATE=0.1

# Analytics (Limited tracking for staging)
GOOGLE_ANALYTICS_ID=${STAGING_GA_ID}
MIXPANEL_TOKEN=${STAGING_MIXPANEL_TOKEN}

# Monitoring (Prometheus/Grafana)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# ========================
# N8N Workflow Configuration
# ========================
N8N_HOST=${STAGING_N8N_HOST}
N8N_PORT=443
N8N_PROTOCOL=https
N8N_WEBHOOK_URL=https://n8n-staging.aicontentfactory.com/webhook
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=${STAGING_N8N_USER}
N8N_BASIC_AUTH_PASSWORD=${STAGING_N8N_PASSWORD}

# N8N Database
N8N_DB_TYPE=postgresdb
N8N_DB_POSTGRESDB_HOST=${STAGING_DB_HOST}
N8N_DB_POSTGRESDB_PORT=5432
N8N_DB_POSTGRESDB_DATABASE=n8n_staging
N8N_DB_POSTGRESDB_USER=${STAGING_N8N_DB_USER}
N8N_DB_POSTGRESDB_PASSWORD=${STAGING_N8N_DB_PASSWORD}

# ========================
# Performance Settings
# ========================
# Cache TTL (optimized for staging)
CACHE_TTL=600
CACHE_ENABLED=true
CACHE_COMPRESSION=true

# Background job processing
QUEUE_ENABLED=true
QUEUE_CONCURRENCY=5
QUEUE_MAX_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=5000

# Content generation limits
MAX_CONCURRENT_GENERATIONS=5
CONTENT_TIMEOUT=600000
AI_REQUEST_TIMEOUT=30000

# Database connection pooling
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_IDLE_TIMEOUT=300000

# ========================
# Feature Flags
# ========================
FEATURE_TREND_ANALYSIS=true
FEATURE_CONTENT_GENERATION=true
FEATURE_PLATFORM_UPLOAD=true
FEATURE_ANALYTICS=true
FEATURE_NOTIFICATIONS=true
FEATURE_ADVANCED_AI=true
FEATURE_A_B_TESTING=true
FEATURE_BETA_FEATURES=true

# ========================
# Logging Configuration
# ========================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/ai-content-factory/staging.log
LOG_MAX_SIZE=50MB
LOG_MAX_FILES=10
LOG_COMPRESS=true

# Structured logging
LOG_INCLUDE_TIMESTAMP=true
LOG_INCLUDE_LEVEL=true
LOG_INCLUDE_REQUEST_ID=true

# Database query logging (limited for staging)
DB_LOGGING=false
DB_LOG_QUERIES=false
DB_LOG_SLOW_QUERIES=true
DB_SLOW_QUERY_THRESHOLD=1000

# ========================
# Backup & Maintenance
# ========================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 3 * * *"
BACKUP_RETENTION_DAYS=14
BACKUP_S3_BUCKET=ai-content-factory-backups-staging

# Database backup
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE="0 2 * * *"
DB_BACKUP_COMPRESSION=true

# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System maintenance in progress"

# ========================
# Auto-scaling Configuration
# ========================
# Resource limits
MAX_MEMORY_USAGE=2GB
MAX_CPU_USAGE=80
SCALE_UP_THRESHOLD=70
SCALE_DOWN_THRESHOLD=30

# Health checks
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TIMEOUT=10
READY_CHECK_ENDPOINT=/ready

# ========================
# Compliance & Privacy
# ========================
# GDPR compliance
GDPR_ENABLED=true
DATA_RETENTION_DAYS=90
COOKIE_CONSENT_REQUIRED=true

# Privacy settings
ANONYMOUS_ANALYTICS=true
IP_ANONYMIZATION=true
USER_DATA_ENCRYPTION=true

# ========================
# Localization
# ========================
DEFAULT_LANGUAGE=th
SUPPORTED_LANGUAGES=th,en
TIMEZONE=Asia/Bangkok
CURRENCY=THB

# ========================
# Third-party Integrations
# ========================
# Webhook endpoints
WEBHOOK_SECRET=${STAGING_WEBHOOK_SECRET}
WEBHOOK_TIMEOUT=10000
WEBHOOK_RETRY_ATTEMPTS=3

# External API timeouts
EXTERNAL_API_TIMEOUT=30000
EXTERNAL_API_RETRY_ATTEMPTS=2
EXTERNAL_API_RETRY_DELAY=1000

# ========================
# Testing in Staging
# ========================
# A/B Testing
AB_TESTING_ENABLED=true
AB_TESTING_PERCENTAGE=50

# Feature testing
CANARY_DEPLOYMENT=false
SHADOW_TESTING=false

# ========================
# Security Headers
# ========================
HELMET_ENABLED=true
CONTENT_SECURITY_POLICY=true
HSTS_ENABLED=true
REFERRER_POLICY=strict-origin-when-cross-origin

# ========================
# Staging Specific Settings
# ========================
# Data seeding for testing
SEED_STAGING_DATA=true
STAGING_USER_EMAIL=test@aicontentfactory.com
STAGING_USER_PASSWORD=${STAGING_TEST_PASSWORD}

# Mock integrations for cost control
MOCK_EXPENSIVE_APIs=false
MOCK_PAYMENT_GATEWAY=true
STAGING_MODE=true

# Notifications
STAGING_NOTIFICATIONS_WEBHOOK=${STAGING_SLACK_WEBHOOK}
NOTIFY_ON_DEPLOYMENT=true
NOTIFY_ON_ERRORS=true

# ========================
# Environment Validation
# ========================
# Required environment variables validation
VALIDATE_ENV_ON_START=true
FAIL_ON_MISSING_ENV=true

# Staging environment checks
STAGING_ENV_CHECK=true
PREVENT_PRODUCTION_DATA=true